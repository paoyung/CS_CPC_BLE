<!DOCTYPE html>
<html>
    <head>
        <meta content="text/html; charset=utf-8" http-equiv="content-type" />
        <meta name="viewport" content="width = device-width, initial-scale = 1.0, maximum-scale = 1.0, user-scalable=0" />
        <title>中油油價系統</title>
        <style>
            body {
                background-color: white;
                font-family: Arial, Helvetica, Sans-Serif;
                color: black;
            }
            input {
                width: 80px;
                padding: 5px 10px;
                margin: 4px 0;
                display: inline-block;
                border: 1px solid rgb(255, 144, 144);
                border-radius: 5px;
                box-sizing: border-box;
                height: 40px;
                background-color: #fafafa;
                font-size: 12pt;
                color: darkblue;
            }
            input:focus {
                outline: none !important;
                border: 1px solid rgb(99, 99, 255);
                box-shadow: 0 0 10px #719ece;
            }
            td {
                text-align: left;
            }
            select {
                width: 150px;
                padding: 5px 10px;
                margin: 4px 0;
                border: 1px solid  rgb(255, 144, 144);
                border-radius: 5px;
                box-sizing: border-box;
                height: 39px;
                font-size: 12pt;
                background-color: #fafafa;
            }
            select:focus {
                outline: none !important;
                border: 1px solid rgb(90, 90, 236);
                box-shadow: 0 0 10px #719ece;
            }
            button {
                background-color: #5c5c5c;
                border: 0;
                border: 1px solid rgb(150, 149, 172);
                color: white;
                padding: 8px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                border-radius: 4px;
                font-size: 12pt;
            }
            button:hover {
                outline: none !important;
                border: 1px solid rgb(255, 62, 62);
                box-shadow: 0 0 10px #719ece;
            }
            div {
                display: table;
                margin-right: auto;
                margin-left: auto;
            }
            .prdt{
                width: 150px;
                color: white;
                border-color: #aaa;
            }
            .prdtN {
                width: 150px;
                padding: 5px 10px;
                margin: 4px 0;
                display: inline-block;
                border: 1px solid rgb(255, 144, 144);
                border-radius: 5px;
                box-sizing: border-box;
                height: 40px;
                background-color: #fafafa;
                font-size: 12pt;
                color: white;
                text-shadow:2px 2px 2px black;
            }
            .tn{
                padding-left: 5px;
            }
            .brt{
                width:80px;
                background-color: #fafafa;
            }
        </style>
    </head>
    <body style="text-align: center;">
        <div style="padding: 12px 12px;">
            <img
                id="cpcLogo"
                style="border: 0;"
                alt="CPC_Mark"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAAwAgMAAABF8Y98AAAADFBMVEXsHBUhVZeSrMT4/Pr93m36AAAAB3RJTUUH5AwMDx8bgkQhwgAABQFJREFUSMfFls1u20YQx4XkUiRA/SbtPT30KUghXCA8OYBkWHt2gVh+Ca4QErBzoQKSgHhSAAoIN0CfwerBl1x2BZNA7QuLLh3NdJaS8tEGaKIUKC/82t/s7Mx/ZreH33Td9v4TPnXc7Bt442VpkO/NQ7hI0zLcm7+excPYS/i+fHg9RExG0Z48jLwqcDMRy/14naQiS91itFnAnY1IWUo0+ZfxUahopOHhZgF/dPyQ45rtzH24QP6Dh9GoGzjV0+5TQ0OM4zAEd/eKd7DjhxFwvNm+JZz4dVFIbImxd7rUGM38sUPOEK/R0MdMF3wzt3FceJK6G1tO6hFvppr8sGEcjXd8/HjwlBaGZJf4qt8ccszMGMPAb38fuYJWBVawgngd0bjbnxHrqAtgQPMY1xt2PFp+KbQjUdCTIpHUY6ZRS+iTEctfnRN2e0CB0xaAPjA0h4+zHLzU8ojLSaQkEoVgSqzGNP/lGNzWxQnx4UBi/fbhDZpF3dVC4iIkz7MwcBzZ8YrNAml4hCnGsaxzV4AghvJr+eMFTf/i3gHCCSUADh1PVO2xky9Tpk5zVKnUEdBdzqQAN+G1ZBNztEkA8TCY2jT2aAGjRRdUXDVl4kgNXlD6GATErxCel6+5glcwrjHo79Jv+V/I67cdfz5AmzGgmLWxVLHj4kWtYn7JlkICp6/YpMRHky62Wlh+/Yoez3q9+4hXFAlshjFfZ5VA5XkZni+COb8UjifR1ySbZjZeYUh6ExmqwPJmeoHQo4sSeNwpJPaBqRRbygOGbazk8mrKEfxcb3nBsPU0NtOOX13gu+96984krs6JXzPDwV/abuDTNEbFGEbG8lJQKmZjjUzIxlUkko6vOf75qHf/zZZHZsZrLmZ+x0+sYEeMSgn8lvzR6zHFtfANa7CVbX/L/3T28HbHC1o/zwzf8tlkLf0qkOA39Elfj5dUV7aIrFa2/LtH7YwqYMMHaQ4cbDMhvga8aXGWGVfmtpK0Ip5hjV2pAdvw8GN59+uOr7vMig3/vu7dTeHfGbnCD30ltzy9VkmY73h834W+qP+Ylxc02yCl4Kxm8uv733pK+hFpFW3187U8WL4N7e4RWv1SX6AGQJUL6adD2/dPN5S6D/zJihIRBnKrf+WWDmsdTkL8xJu62T4E9t9HvK0/CElbcGwbqEhOh0JRONSnG9JyN3/l5R/Pj7MT+5fCB8XLTn6nXCuqryX46qg6T/g1azM1Cxbglp1J1nrtoi1nokxy239s27y0O8D0ykoCgS+1rW3ypa+eOCwQDQs9MTeHI8d2eqbiYj5/djJ45jDbP0Myek28ji42vOdueGBalZya3zzPot+aphz5E8tXqijmJ4vimEfEd23T8pE1ZHnnaMtzpckZZuYyZatGwRPe8W1QFE8HZbzhzZSaK+1gMOrSz9ajITWhCAV4XFs+MvPSiz7iyf/XrmOSDQ8D2us0mSiKTvgUP1Qlw8vFiAniJxM1L/1IW//5hKqDLZuiZKLZ+k/tQWA7hkhMN+ktbe7JhsODvgaHKbcpvb6aG+eUjNn5A8ubwy2vdXHUynjmdfluM2rWkEqrvyqvYJi3WYtpVi0ghbwmsWVtupB5DelMZpY3CZ+++GF4nXxO/fC3U039mfOHJ/I3B1U0xf141Kl39kCk7LO8/PfzU3uUnj3I9jn+bM+PcXZ2kBztf/4Ecfa99y3nX0D4n87ffwFZJRzjGFa7DgAAAABJRU5ErkJggg=="
            />
        </div>
        <div id="msg">
            <table>
                <tr>
                    <td class="tn">品名</td><td class="tn">油價</td>
                </tr>
                <tr>
                    <td>
                        <span class="prdtN" style="background: #57B53E">98無鉛</span>
                    </td>
                    <td>
                        <input type="text" id="prz1" placeholder="油價"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span class="prdtN" style="background: #AA5C40">95無鉛</span>
                    </td>
                    <td>
                        <input type="text" id="prz2" placeholder="油價"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span class="prdtN" style="background: #6D3B85">92無鉛</span>
                    </td>
                    <td>
                        <input type="text" id="prz3" placeholder="油價"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span class="prdtN" style="background: #00783F">酒精汽油</span>
                    </td>
                    <td>
                        <input type="text" id="prz4" placeholder="油價"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span class="prdtN" style="background: #00A1E9">超級柴油</span>
                    </td>
                    <td>
                        <input type="text" id="prz5" placeholder="油價"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <select id="prdt6" style="background: #F08200;color:white;text-shadow:2px 2px 2px black;">
                        </select>
                    </td>
                    <td>
                        <input type="text" id="prz6" placeholder="油價"/>
                    </td>
                </tr>
                <tr>
                    <td style='text-align:right;padding-right:5px'>顯示亮度</td>
                    <td>
                        <select id="brt" class="brt"></select>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: center; padding-top: 10px;" colspan=2>
                        <button id="btnSend" style="width:100px;">儲存並送出</button>
                        <button id="btnReset" style="width:60px;">重設</button>
                        <button id="btnLogout" style="width:60px;">登出</button>
                    </td>
                </tr>
            </table>
        </div>
<script>
function id(e) {return document.getElementById(e);}
function getV(e) {return id(e).value.trim();}
function setV(e, v) {id(e).value = v;}

function isNumber(v){
    var v = parseInt(v);
    return  isNaN(v) == false && typeof(v) == 'number';
}

function savePrz() {
    var data = {
        prz1: getV('prz1'), prz2: getV('prz2'), prz3: getV('prz3'),
        prz4: getV('prz4'), prz5: getV('prz5'), prz6: getV('prz6'),
        prdt6: getV('prdt6'), brt: getV('brt') };
    var chk = true;
    var v;
    for(i=1;i<=6;i++){
        v = data['prz'+i];
        if(v){
            chk = chk && isNumber(v);
        }
    }
    if(!chk){
        alert('油價數值不正確，請檢查後再送出，謝謝。');
        return;
    }

    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function () {
        4 == xhr.readyState &&
            200 == xhr.status &&
            alert("油價已儲存並發送！");
    };
    xhr.open("POST", "/f/savePrice", true);
    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    xhr.send("data=" + JSON.stringify(data));
}

function goNext() {window.location.href = "./config.html";}

function logout(){
    window.location.href = "./logout.html";
}

function resetDev() {
    for(i=1; i<=6; i++){
        for(v=0; v<=10; v++){
            id('prz'+i).value='00.0';
        }
    }
    setV('prdt6', 'yiHua');
    setV('brt', '5');
}

function loadData(jStr){
    var d = JSON.parse(jStr);
    for(i=1; i<=6; i++){
        setV('prz'+i, d.prz[i-1]);
    }
    var pN = ['液化石油氣', '尿素', '煤油'];
    var oN = ['yiHua', 'NiaSu', 'MeiYou'];
    for(p=0; p<3; p++){
        id('prdt6').options.add(new Option(pN[p],oN[p]));
    }
    for(v=1; v<=10; v++){
        id('brt').options.add(new Option(v,v));
    }
    setV('prdt6', d.prdt6);
    setV('brt', d.brt);
}

setTimeout(function () {
    id("btnSend").onclick = savePrz;
    id("btnReset").onclick = resetDev;
    id("btnLogout").onclick = logout;
    id("cpcLogo").onclick = goNext;
}, 500);
</script>

